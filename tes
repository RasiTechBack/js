/*
 * allFeaturesDemo.js
 * Menunjukkan pemakaian semua fitur:
 *   1) require("someLib") 
 *   2) console.log(...)
 *   3) setColor, setFont, setFontSize
 *   4) prompt (input user)
 */
(function(){
  /**
   * Fungsi require sederhana untuk memuat library JS secara sinkron.
   * Library diambil dari URL: https://js.rasitech.org/package/namalib.js
   */
  function require(libName) {
    var url = "https://js.rasitech.org/package/" + libName + ".js";
    var xhr = new XMLHttpRequest();
    xhr.open("GET", url, false); // Permintaan sinkron untuk keperluan demo
    xhr.send(null);
    if (xhr.status === 200) {
      // Evaluasi kode library yang didapatkan
      eval(xhr.responseText);
      return window[libName];
    } else {
      console.error("Gagal memuat library: " + libName);
      return null;
    }
  }

  /**
   * Fungsi setColor versi demo: hanya mencatat aksi melalui console.log.
   * Parameter:
   * - selector: selector CSS
   * - color: warna yang diinginkan
   * - textFilter (opsional): teks yang ingin diubah warnanya
   */
  function setColor(selector, color, textFilter) {
    console.log("setColor dipanggil dengan selector: '" + selector + "', color: '" + color + "'" + (textFilter ? ", textFilter: '" + textFilter + "'" : ""));
  }

  /**
   * Fungsi setFont versi demo: hanya mencatat aksi melalui console.log.
   * Parameter:
   * - selector: selector CSS
   * - font: nama font yang diinginkan
   * - textFilter (opsional): teks yang ingin diubah font-nya
   */
  function setFont(selector, font, textFilter) {
    console.log("setFont dipanggil dengan selector: '" + selector + "', font: '" + font + "'" + (textFilter ? ", textFilter: '" + textFilter + "'" : ""));
  }

  /**
   * Fungsi setFontSize versi demo: hanya mencatat aksi melalui console.log.
   * Parameter:
   * - selector: selector CSS
   * - size: ukuran font yang diinginkan (dalam px)
   * - textFilter (opsional): teks yang ingin diubah ukurannya
   */
  function setFontSize(selector, size, textFilter) {
    console.log("setFontSize dipanggil dengan selector: '" + selector + "', size: '" + size + "px'" + (textFilter ? ", textFilter: '" + textFilter + "'" : ""));
  }

  // Ekspor fungsi ke objek global (window)
  window.require = require;
  window.setColor = setColor;
  window.setFont = setFont;
  window.setFontSize = setFontSize;

  // 1) Panggil require untuk memuat "someLib.js"
  // Pastikan file someLib.js ada di https://js.rasitech.org/package/someLib.js
  const someLib = require("someLib");

  // Asumsikan someLib menempel ke objek global window.someLib
  if (window.someLib && window.someLib.testFunction) {
    console.log("someLib.testFunction() -> " + window.someLib.testFunction());
  } else {
    console.log("someLib loaded, but no 'testFunction' found. Skipping...");
  }

  // 2) Contoh penggunaan console.log biasa
  console.log("Menjalankan allFeaturesDemo.js ...");

  // 3) Alih-alih menambahkan konten ke halaman dengan innerHTML,
  //    tampilkan konten yang seharusnya muncul melalui console.log.
  console.log("Demo section content:");
  console.log("  - Ini paragraf pertama. Kata 'merah' di sini: merah");
  console.log("  - Ini paragraf kedua. Kata 'besar' di sini: besar");
  console.log("  - Kalimat ini mengandung kata 'filter' yang akan kita ubah.");

  // 4) Demonstrasi fungsi-fungsi tanpa innerHTML
  console.log("Mewarnai kata 'merah' jadi merah di semua <p>...");
  setColor("p", "red", "merah");

  console.log("Mengganti font kata 'besar' di .special menjadi 'Arial'...");
  setFont(".special", "Arial", "besar");

  console.log("Mengubah font size kata 'filter' di <p> menjadi 24px...");
  setFontSize("p", 24, "filter");

  // 5) Tanpa textFilter: contoh pengubahan untuk seluruh <body>
  console.log("Mengubah seluruh teks <body> menjadi hijau (tanpa textFilter)...");
  setColor("body", "green");

  // 6) Menggunakan prompt untuk input user
  console.log("Menanyakan kabar user...");
  const userAnswer = prompt("Bagaimana kabar Anda hari ini?");
  console.log("User menjawab: " + userAnswer);

  // 7) Selesai
  console.log("Selesai demonstrasi allFeaturesDemo.js.");
})();
